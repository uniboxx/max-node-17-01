<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/cart.css">
<script type="module" src="/js/cart.js"></script>
</head>

<body>
  <%- include('../includes/navigation.ejs') %>
  <main class="centered">
    <h1>Cart</h1>
    <hr>
    <% if(products.length>0) { %>
    <table>
      <thead>
        <tr>
          <th>Product</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Total Price</th>
        </tr>
      </thead>
      <tbody>
        <% for (let product of products) { %>
        <% if(product.qty>0) { %>
        <tr>
          <td><%= product.productData.title  %></td>
          <td>€ <%= Number(product.productData.price).toFixed(2) %></td>
          <td><span class="quantity" data-id="<%= product.productData.id %>" data-quantity="<%= product.qty %>" data-product-price="<%= product.productData.price %>"><%= product.qty %></span><button class="subtract">&dash;</button> <button class="add">+</button></td>
          <td>€ <span class="totalPartial"><%= Number(product.productData.price*product.qty).toFixed(2) %></span></td>
        </tr>
        <% } %>
        <% } %>
      </tbody>
      <tfoot>
        <tr>
          <td></td>
          <td></td>
          <td>Total</td>
          <td>€ <span id="totalPrice"><%= Number(totalPrice).toFixed(2) %></span></td>
        </tr>
      </tfoot>
    </table>
    <% } else { %>
    <h1>No products in Cart</h1>
    <% } %>
  </main>
  <%- include('../includes/end.ejs') %>